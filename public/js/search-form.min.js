jQuery(document).ready(function(a){if(!window.console){window.console={log:function(c){}}}var b=[];a(".wc-bookings-extensions-form").on("change","input, select",function(g){var d=a("#search-datepicker").datepicker("getDate");if(""===d){return}$form=a(this).closest("form");var c=$form.index(this);var f=$form.attr("data-nonce");if(typeof b[c]!=="undefined"&&b[c].hasOwnProperty("abort")){b[c].abort()}if(null!=d){$form.find(".wc-booking-extensions-search-result").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:0.6}}).show();b[c]=a.ajax({type:"POST",url:booking_form_params.ajax_url,data:{action:booking_form_params.action,_ajax_nonce:f,day:d.getDate(),month:d.getMonth()+1,year:d.getFullYear(),form:$form.serialize()},success:function(e){if(e.charAt(0)!=="{"){console.log(e);e="{"+e.split(/\{(.+)?/)[1]}result=a.parseJSON(e);if(-1!==a.inArray(result.result,["SUCCESS","ERROR"])){$form.find(".wc-booking-extensions-result-list").html(result.html);$form.find(".wc-booking-extensions-search-result").unblock();$form.find(".wc-booking-extensions-result-list a").each(a.proxy(function(i,j){var h=a(j).attr("href");if(-1===h.indexOf("#")){var l=Object.assign(getUrlVars(this.data),getUrlVars(decodeURIComponent(getUrlVars(this.data).form)));var k=encodeURIComponent(a.param({year:l.year,month:l.month,day:l.day,duration:l.wc_bookings_field_duration,persons:l.wc_bookings_field_persons}));a(j).attr("href",a(j).attr("href")+"?wc_booking_search_data="+k)}},this))}else{$form.find(".wc-booking-extensions-search-result").hide();console.log(e)}a(document.body).trigger("wc_booking_form_changed")},error:function(){$form.find(".wc-booking-extensions-search-result").hide();$form.find(".wc-booking-extensions-search-result").unblock()},dataType:"html"})}}).each(function(){var c=a(this).closest("form").find(".single_add_to_cart_button");c.addClass("disabled")});if("true"===booking_form_params.pao_pre_30){a(".wc-bookings-extensions-form").parent().on("updated_addons",function(){a(".wc-bookings-booking-form").find("input").first().trigger("change")})}a(".wc-bookings-extensions-form, .wc-bookings-booking-form-button").show().removeAttr("disabled")});function get_client_server_timezone_offset_hrs(b){if(!booking_form_params.timezone_conversion){return 0}var a=moment(b);var d=a.utcOffset();a.tz(booking_form_params.server_timezone);var c=a.utcOffset();return(d-c)/60}var getUrlVars=function(e){var d=[],c;var a=e.split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d};