document.addEventListener("DOMContentLoaded",function(){var b=document.getElementById("calendar");var d=[];function a(f){if(!confirm(fullcalendarOptions.confirmMessage)){f.revert()}else{var e=f.event.end;if(null===e&&false===f.event.allDay){e=new Date(f.event.start.getTime()+3600000)}d.booking=$.ajax({type:"POST",url:fullcalendarOptions.events.targetUrl,data:{_ajax_nonce:fullcalendarOptions.events.nonce,id:f.event.id,start:f.event.start!==null?f.event.start.toISOString():null,end:e!==null?e.toISOString():null,allDay:f.event.allDay,resource:f.hasOwnProperty("newResource")&&f.newResource!==null?f.newResource.id:null},success:function(g){},error:function(g,i,h){f.revert()},complete:function(){},dataType:"json"})}}var c=new FullCalendar.Calendar(b,{plugins:["interaction","resourceDayGrid","resourceTimeGrid"],defaultView:fullcalendarOptions.defaultView,defaultDate:fullcalendarOptions.defaultDate,schedulerLicenseKey:fullcalendarOptions.schedulerLicenseKey,allDaySlot:true,editable:true,selectable:true,eventLimit:true,nowIndicator:true,navLinks:true,businessHours:[{daysOfWeek:[1,2,3,4,5],startTime:"08:00",endTime:"18:00"},{daysOfWeek:[6],startTime:"10:00",endTime:"16:00"},{daysOfWeek:[0],startTime:"13:00",endTime:"20:00"}],header:{left:"prev,next today",center:"title",right:"resourceTimeGridDay,resourceTimeGridTwoDay,timeGridWeek,dayGridMonth"},views:{resourceTimeGridTwoDay:{type:"resourceTimeGrid",duration:{days:2},buttonText:"2 days"}},resources:fullcalendarOptions.resources,eventSources:[{url:fullcalendarOptions.events.sourceUrl,method:"POST",extraParams:{_ajax_nonce:fullcalendarOptions.events.nonce}}],eventRender:function(e){if(e.view.constructor.name==="DayGridView"){$(e.el).find(".fc-title").first().before('<span class="wbe-booking-id">#'+e.event.id+"</span>");if(e.event.extendedProps.hasOwnProperty("bookedBy")){$(e.el).find(".fc-content").first().append('<span class="wbe-booked-by">Booked by '+e.event.extendedProps.bookedBy+"</span>")}if(e.event.extendedProps.hasOwnProperty("bookedFor")){$(e.el).find(".fc-content").first().append('<span class="wbe-booked-for">Booked for '+e.event.extendedProps.bookedFor+"</span>")}if(e.event.extendedProps.hasOwnProperty("persons")){$(e.el).find(".fc-content").first().append('<span class="wbe-pax">('+e.event.extendedProps.persons+" pax)</span>")}}else{$(e.el).find(".fc-title").first().before('<div class="wbe-booking-id">#'+e.event.id+"</div>");if(e.event.extendedProps.hasOwnProperty("bookedBy")){$(e.el).find(".fc-content").first().append('<div class="wbe-booked-by">Booked by '+e.event.extendedProps.bookedBy+"</div>")}if(e.event.extendedProps.hasOwnProperty("bookedFor")){$(e.el).find(".fc-content").first().append('<div class="wbe-booked-for">Booked for '+e.event.extendedProps.bookedFor+"</div>")}if(e.event.extendedProps.hasOwnProperty("persons")){$(e.el).find(".fc-content").first().append('<div class="wbe-pax">('+e.event.extendedProps.persons+" pax)</div>")}if(e.view.constructor.name==="ResourceTimeGridView"){$(e.el).find(".fc-title").remove()}}},eventResize:a,eventDrop:a,select:function(e){console.log("select",e.startStr,e.endStr,e.resource?e.resource.id:"(no resource)")},dateClick:function(e){console.log("dateClick",e.date,e.resource?e.resource.id:"(no resource)")}});c.render()});